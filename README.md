# k8s - pet

## Основные модули Ansible

1. Пакеты и обновления:

```bash 
apt  - # пакеты в Debian и Ubuntu
yum  - # пакеты CentOS и RHEL подобные
dnf  - # пакеты в Fedora и RHEL8+
package - # Универсальный модуль для пакетов
```

2. Сервисы и процессы:

```bash
service - # запуск, остановка, перезапуск сервисов
systemd - # управление сервисами через systemd
```

3. Файлы и директории:

```bash
copy - # копирование файлов на хост
template - # копирование файлов-шаблонов (с Jinja2)
file - # управление файлами и папками (создать, удалить, права, владельцы)
unarchive - # распаковка архивов
get_url - # скачивание файлов по URL
lineinfile - # редактирование отдельных строк в файле
blockinfile - # вставка/удаление блока текста в файл
```

4. Пользователи и доступ: 

```bash
user - # управление пользователями
group - # управление группами
authorized_key - # добавление SSH-ключей пользователям
```

5. Сеть:

```bash
uri - # HTTP-запросы (GET/POST, проверка сайта, API)
ping - # проверка доступности хоста через Ansible
```

6. Задачи и автоматизация:

```bash
cron - # Управление крон заданиями
```

7. Выполнение комманд:

```bash
command - # запуск команды (без shell)
shell - # запуск команды через shell (можно использовать переменные окружения, пайпы и т.п.)
script - # запуск локального скрипта на удалённом хосте
```

8. Информация о системе:

```bash
setup - # Сбор фактов
```

9. Репозитории 

```bash
git - # клонирование и управление репозиториями
```

10. Управление инвентарем и переменными:

```bash
inventory (hosts) - # список серверов, разделение по группам
vars - # объявление переменных в playbook
group_vars / host_vars - # переменные для групп или отдельных хостов
facts - # системные параметры (ansible_distribution, ansible_hostname и т.д.)
```

11. Управление задачами:

```bash
tags - # запуск только части задач (--tags web)
handlers - # действия, которые выполняются при изменении (например, перезапуск сервиса)
when - # условные проверки (например, выполнить задачу только если ansible_os_family == "Debian")
with_items / loop - # циклы в задачах
```

12. Роли: 

```bash
roles/ - # структура для организации плейбуков (шаблоны, handlers, tasks, vars и т.д.)
ansible-galaxy - # установка ролей из публичного репозитория
```

13. Безопасность: 

```bash
ansible-vault - # шифрование паролей, ключей и других секретов
```

14. Полезные модули:

```bash
debug - # вывод переменных и сообщений
stat - # информация о файле (существует ли, права)
assert - # проверки условий (если не выполняется — play падает)
wait_for - # ожидание события (например, пока порт станет доступен)
reboot - # перезагрузка сервера
```

